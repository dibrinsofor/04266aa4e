## urlPlaylists


### what is this?
This tool allows you to share a burst of urls as one link (bunch of supporting urls) as one link to teammates, friends, etc.

### why am i making it?
 I was looking for an easier way to share supporting internet resources during my events with the MLSA and the ACC and came up with this. I got to exercise some upsides of using noSQL dbs, setup an `IP` based rate limiting service and even introduced a faux implementation of Stripe's client level idempotency [as seen here](https://stripe.com/blog/idempotency) when I noticed duplicate and failed requests misbehaving. It turned into a learning opportunity.

![picture of working prototype](https://media.discordapp.net/attachments/995351247014076516/995510252348903524/image.png?width=903&height=508)
<center style=color:grey;>picture of working prototype</center>

### setup
I've run out of monthly azure credits so it's down for now but if you just want to run it locally, you can:
- setup mongodb
- configure env vars in `.env`
- build (`docker build --tag urlplaylists .`) and run the docker image (`docker run urlplaylists`)

#### Endpoints (API Docs)
- Create playlists: \
  sample `POST` request to `/` with `Content-type`:`application/json`. with `idempotency-key` as a request header for subsequent requests
    ```json
    {
        "urls": ["smol.com", "uwu.com", "zyzz.com", "nattyboi.com"],
        "description": "a collection of internet slangs",
        "title": "Wannabe Zoomer"
    }
    ```
    sample response:
    ```json
    {
        "message": "playlist stored succesfully",
        "rand_slug": "123jdi34"
    }
    ```

- Get playlistss: \
  make a `GET` request to `/<rand_slug>` replacing `<rand_slug>` with an appropriate string like `"123jdi34"`

  sample response:
  ```json
  {
    "message": "playlist retrieved succesfully",
    "title": "Wannabe Zoomer", 
    "description": "a collection of internet slangs",
    "urls": ["smol.com", "uwu.com", "zyzz.com", "nattyboi.com"],
    ""
  }
  ```
  
### what's coming next
I think some bits here can be reused. I plan to:
- [ ] continue piling stuff on
- [ ] abstract the rate-limiting and idempotency middlewares into sole repos

### want to help make this better?
create an issue and we can figure something out

[//]: # (So depending on use case, you may want to keep the documentation short. in that case you may not need to include the last two sections or you can)



<!-- An idempotency key is a unique value that’s generated by a client and sent to an API along with a request. The server stores the key to use for bookkeeping the status of that request on its end. If a request should fail partway through, the client retries with the same idempotency key value, and the server uses it to look up the request’s state and continue from where it left off. The name “idempotency key” comes from [Stripe’s API](https://stripe.com/blog/idempotency). -->


<!-- `docker run --name mongodb -e MONGO_INITDB_ROOT_USERNAME=myuser -e MONGO_INITDB_ROOT_PASSWORD=mypassword -e MONGO_INITDB_DATABASE=tasks -p 27017:27017 -d mongo:latest`
`docker build --tag urlplaylists .`
`docker run urlplaylists` -->

<!--idempotency key protects against faults on the network between the client and stripe's idempotency layer (as a request/response cache and not tied to operation logic) and quite frankly, idk what the fuss is about. if it's good enough for Stripe then it's good for me.-->

<!--griff, my lieber meister-->
<!--midlleware detecks idemp key, searches redis to see if key exists and status, else persists endpoint response after db call-->